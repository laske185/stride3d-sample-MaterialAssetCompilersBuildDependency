# AssetCompiler is unable to resolve material references from layers of materials

This repo contains a sample to reproduce an issue in [Stride](https://github.com/stride3d/stride) 4.2.0.2043.

A sample to reproduce the behavior of the MaterialAssetCompilers described in issue [#1477](https://github.com/stride3d/stride/issues/1477).

To resolve the issue the [Pull Request #1478](https://github.com/stride3d/stride/pull/1478) changes the BuildDependencyType of the MaterialAssetCompiler from `Runtime` to `CompileAsset`. Through this change the Material A will also be compiled and the Material B will be able to resolve the reference to Material A.

When building this project the Asset compiler currently produces this error:

| Severity | Code    | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Project                                       | File                                                                                                                            | Line | Suppression State | Details |
| -------- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- | ---- | ----------------- | ------- |
| Error    | MSB3073 | The command ""C:\Users\peter\.nuget\packages\stride.core.assets.compilerapp\4.2.0.2043\buildTransitive\..\lib\net8.0-windows7.0\Stride.Core.Assets.CompilerApp.exe" --disable-auto-compile --project-configuration "Debug" --platform=Windows --project-configuration=Debug --compile-property:StrideGraphicsApi=Direct3D11 --output-path="C:\Users\peter\source\repos\examples\MaterialAssetCompilersBuildDependency\Bin\Windows\Debug\win-x64\data" --build-path="C:\Users\peter\source\repos\examples\MaterialAssetCompilersBuildDependency\MaterialAssetCompilersBuildDependency.Windows\obj\stride\assetbuild\data" --package-file="C:\Users\peter\source\repos\examples\MaterialAssetCompilersBuildDependency\MaterialAssetCompilersBuildDependency.Windows\MaterialAssetCompilersBuildDependency.Windows.csproj" --msbuild-uptodatecheck-filebase="C:\Users\peter\source\repos\examples\MaterialAssetCompilersBuildDependency\MaterialAssetCompilersBuildDependency.Windows\obj\Debug\win-x64\stride\assetcompiler-uptodatecheck"" exited with code 1. | MaterialAssetCompilersBuildDependency.Windows | C:\Users\peter\.nuget\packages\stride.core.assets.compilerapp\4.2.0.2043\buildTransitive\Stride.Core.Assets.CompilerApp.targets | 146  |                   |
| Error    | 3,014s  | [AssetCompiler] Unhandled exception. Exception: InvalidOperationException: Could not find asset Material A for bundle default                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | MaterialAssetCompilersBuildDependency.Windows | C:\Users\peter\source\repos\examples\MaterialAssetCompilersBuildDependency\MaterialAssetCompilersBuildDependency.Windows\EXEC   | 1    |                   |
